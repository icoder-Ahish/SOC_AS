class TriggerAPI(APIView):
    def post(self, request):
         if request.method == 'POST':
            data = request.data
            
            print(data)
            
            project_id = "146"
            gitlab_token = "xGqFqqsi5sMWtyNLHxkS"

            base_url = f'https://git.os3.coe.com/api/v4/'
            headers = {"PRIVATE-TOKEN": gitlab_token}

            if data:
              print(f'Triggering bracnh: wazuh-s100')  
              trigger_branch(base_url, project_id, headers, "wazuh-s100")  # Vm creations

            for branch in data:
              print(f'Triggering branch: {branch}')  
              trigger_branch(base_url, project_id, headers, branch)    #  tool installations
        
            return Response ({"message": "pipeline trigger"})
         else:
            return Response ({"message": "pipeline not trigger"})
